#FROM python:3.9.10-bullseye
FROM ubuntu:22.04

RUN echo "Acquire::http::Proxy \""$HTTP_PROXY"\";" >> /etc/apt/apt.conf
ENV https_proxy=$HTTP_PROXY
ENV http_proxy=$HTTP_PROXY
ENV no_proxy="seta-es,seta-mongo,seta-api,seta-nginx,seta-ui,seta-ui-spa"

RUN apt update -y && apt install -y --no-install-recommends  nodejs npm && useradd -m seta
RUN apt install -y  --no-install-recommends curl

ARG ROOT=/home/seta

RUN npm update -g
RUN npm install -g n
RUN n lts
RUN npm install -g primereact
RUN npm install -g primeicons
RUN npm install -g axios
#RUN ng update -g

WORKDIR $ROOT

ADD ./package.json /home/seta/package.json
ADD ./tsconfig.json /home/seta/tsconfig.json
RUN npm install -g

CMD chdir /home/seta/ \
    && npm install \
    && npm start --host '0.0.0.0' --port 3000 
