import*as e from"react";import n from"primereact/api";import{useMountEffect as r,useUpdateEffect as t,useUnmountEffect as l}from"primereact/hooks";import{Portal as o}from"primereact/portal";import{DomHandler as a,ZIndexUtils as c,ObjectUtils as u,classNames as i}from"primereact/utils";function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},f.apply(this,arguments)}function d(e){if(Array.isArray(e))return e}function s(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,l,o,a,c=[],u=!0,i=!1;try{if(o=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;u=!1}else for(;!(u=(t=o.call(r)).done)&&(c.push(t.value),c.length!==n);u=!0);}catch(e){i=!0,l=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(i)throw l}}return c}}function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function p(e,n){if(e){if("string"==typeof e)return m(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,n):void 0}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b=e.forwardRef((function(m,v){var k,h,S=e.useState(m.blocked),I=(h=2,d(k=S)||s(k,h)||p(k,h)||y()),g=I[0],w=I[1],E=e.useRef(null),j=e.useRef(null),x=function(){w(!0)},O=function(){var e=function(){w(!1),m.fullScreen&&a.removeClass(document.body,"p-overflow-hidden"),m.onUnblocked&&m.onUnblocked()};j.current?(a.addClass(j.current,"p-component-overlay-leave"),j.current.addEventListener("animationend",(function(){c.clear(j.current),e()}))):e()},C=function(){if(m.fullScreen&&(a.addClass(document.body,"p-overflow-hidden"),document.activeElement.blur()),m.autoZIndex){var e=m.fullScreen?"modal":"overlay";c.set(e,j.current,n.autoZIndex,m.baseZIndex||n.zIndex[e])}m.onBlocked&&m.onBlocked()};r((function(){g&&x()})),t((function(){m.blocked?x():O()}),[m.blocked]),l((function(){m.fullScreen&&a.removeClass(document.body,"p-overflow-hidden"),c.clear(j.current)})),e.useImperativeHandle(v,(function(){return{props:m,block:x,unblock:O,getElement:function(){return E.current}}}));var N=u.findDiffKeys(m,b.defaultProps),A=function(){if(g){var n=m.fullScreen?document.body:"self",r=i("p-blockui p-component-overlay p-component-overlay-enter",{"p-blockui-document":m.fullScreen},m.className),t=m.template?u.getJSXElement(m.template,m):null;return e.createElement(o,{element:e.createElement("div",{ref:j,className:r,style:m.style},t),appendTo:n,onMounted:C})}return null}(),U=i("p-blockui-container",m.containerClassName);return e.createElement("div",f({id:m.id,ref:E,className:U,style:m.containerStyle},N),m.children,A)}));b.displayName="BlockUI",b.defaultProps={__TYPE:"BlockUI",autoZIndex:!0,baseZIndex:0,blocked:!1,className:null,containerClassName:null,containerStyle:null,fullScreen:!1,id:null,onBlocked:null,onUnblocked:null,style:null,template:null};export{b as BlockUI};
