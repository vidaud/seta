FROM python:3.9.10-bullseye

RUN apt update -y && apt-get install -y nodejs npm && useradd -m seta

ARG ROOT=/home/seta

RUN mkdir -p $ROOT/seta-frontend && mkdir -p $ROOT/seta-flask-server && mkdir -p $ROOT/models
COPY ./seta-flask-server/requirements.txt $ROOT/seta-flask-server/requirements.txt
WORKDIR $ROOT/seta-flask-server
RUN pip install -r requirements.txt


CMD chdir /home/seta/seta-flask-server \
    && export FLASK_RUN_PORT=8080 \
    &&  export FLASK_APP=app.py \
    && export FLASK_ENV=development \
    && flask run -h "0.0.0.0" 

